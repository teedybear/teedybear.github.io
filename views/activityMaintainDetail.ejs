<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    
    <title>後台管理</title>

    <style>
        .table thead th {
            text-align: center;
            color: #ffffff;
            background-color: red;
            font-family: 'Helvetica Neue', Helvetica, Arial, STHeitiTC-light, STHeiti,
                'Microsoft JhengHei', 微軟正黑體, sans-serif;
            letter-spacing: 2px;
        }

        .table th {
            height: 60px;
            width: 100px;
            padding: 10px;
            font-size: 20px;
            margin: 5px;
        }

        .table tr {

            margin: 10px;
        }

        .table td {
            text-align: center;
            height: 60px;

            padding: 10px;
            font-size: 20px;
            margin: 5px;
        }

        .colName {
            align-content: center;
            height: 60px;          
            padding: 5px;
            margin: 5px;

        }

        .inputBox {
            text-align: center;
            height: 60px;
            width: 300px;
            padding: 10px;
            font-size: 20px;
            margin: 5px;
        }

        .btn {
            margin-left: 10px;
            font-size: 20px;
            height: 45px;
            width: 200px;
        }

        .btn-darkblue {
            color: white;
            background-color: #336666;
        }
        .btn-darkblue:hover {
             background: #dadada;
}

        .btn-back {
            color: white;
            background-color: rgb(224, 83, 40);
        }
        .btn-back:hover {
             background: #dadada;
}
    </style>
    <title>後台管理</title>
</head>

<body style="background-color: #B5DEF2;">
    <center>
        <h1>
            <div style="line-height: 100px;vertical-align: middle;background-color: rgb(8, 8, 8);height: 100px;color: rgb(255, 255, 255);">
                龍華區塊鏈
            </div>
            <div
                style="line-height: 80px;margin: 30px;align-content: center;background-color: rgb(255, 255, 255);color:rgb(0, 0, 0);height: 80px;width: 400px;">
                <%= title %>
            </div>

        </h1>
        <div>
            <Form action=<% if(sqldetail[0]){ %>save<%}else{ %>insert<%}%> id='idForm' method='GET'>
                        <Input hidden name='id' value=<% if(sqldetail[0]){ %>
                        <%= sqldetail[0].id %>
                            <% } %> >
                                <div style="padding: 10px;">
                                    <table class="table">
                                        <thead>

                                        </thead>
                                        <tbody>

                                            <tr>
                                                <td>
                                                    <div class='colName' >
                                                        <a style="font-size: 30px;color: red;">＊</a>
                                                        <a style="font-size: 30px;">活動編號</a>
                                                    </div>
                                                </td>
                                                <td>
                                                    <Input <% if(sqldetail[0]){ %> disabled <% } %> id ='activityno'
                                                        name='activityno'
                                                        class="inputBox" value=<% if(sqldetail[0]){ %>
                                                            <%= sqldetail[0].activityno %>
                                                                <% } %> >
                                                </td>

                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class='colName'>
                                                        <a style="font-size: 30px;color: red;">＊</a>
                                                        <a style="font-size: 30px;">活動名稱</a>

                                                    </div>
                                                </td>
                                                <td>
                                                    <Input id='activityname' name='activityname' class="inputBox"
                                                        value=<% if(sqldetail[0]){ %>
                                                    <%= sqldetail[0].activityname %>
                                                        <% } %> >
                                                </td>

                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class='colName'>
                                                        <a style="font-size: 30px;color: red;">＊</a>
                                                        <a style="font-size: 30px;">發起人</a>

                                                    </div>
                                                </td>
                                                <td>
                                                    <Input id='nickname' name='nickname' class="inputBox" value=<%
                                                        if(sqldetail[0]){ %>
                                                    <%= sqldetail[0].nickname %>
                                                        <% } %> >
                                                </td>

                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class='colName'>
                                                        <a style="font-size: 30px;">地點</a>

                                                    </div>
                                                </td>
                                                <td>
                                                    <Input id='location' name='location' class="inputBox" value=<%
                                                        if(sqldetail[0]){ %>
                                                    <%= sqldetail[0].location %>
                                                        <% } %> >
                                                </td>

                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class='colName'>
                                                        <a style="font-size: 30px;">人數限制</a>

                                                    </div>
                                                </td>
                                                <td>
                                                    <Input id='attendnumber' name='attendnumber' class="inputBox"
                                                        value=<% if(sqldetail[0]){ %>
                                                    <%= sqldetail[0].attendnumber %>
                                                        <% } %> >
                                                </td>

                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class='colName'>
                                                        <a style="font-size: 30px;color: red;">＊</a>
                                                        <a style="font-size: 30px;">活動截止日<a style="font-size: 15px;font-weight: bold;">(YYYY/MM/DD)</a></a>

                                                    </div>
                                                </td>
                                                <td>
                                                    <Input id='activitydate' name='activitydate' class="inputBox"
                                                        value=<% if(sqldetail[0]){ %>
                                                    <%= sqldetail[0].activitydate.getFullYear() + "-" + ("0" +
                                                        (sqldetail[0].activitydate.getMonth() + 1)).slice(-2) + "-" +
                                                        ("0" + sqldetail[0].activitydate.getDate()).slice(-2) %>
                                                        <% } %> >
                                                </td>

                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class='colName'>
                                                        <a style="font-size: 30px;color: red;">＊</a>
                                                        <a style="font-size: 30px;">獲得點數</a>

                                                    </div>
                                                </td>
                                                <td>
                                                    <Input id='point' name='point' class="inputBox" value=<%
                                                        if(sqldetail[0]){ %>
                                                    <%= sqldetail[0].point %>
                                                        <% } %> >
                                                </td>

                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class='colName'>
                                                        <a style="font-size: 30px;color: red;">＊</a>
                                                        <a style="font-size: 30px;">兌換碼</a>

                                                    </div>
                                                </td>
                                                <td>
                                                    <Input id='exchangecode' name='exchangecode' class="inputBox"
                                                        value=<% if(sqldetail[0]){ %>
                                                    <%= sqldetail[0].exchangecode %>
                                                        <% } %> >
                                                </td>

                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class='colName'>
                                                        <a style="font-size: 30px;">內容</a>

                                                    </div>
                                                </td>
                                                <td>
                                                    <textarea id='content' name='content'
                                                        style="height: 200px;width: 300px;"> <% if(sqldetail[0]){ %> <%= sqldetail[0].content %>  <% } %>  </textarea>
                                                </td>

                                            </tr>
                                            <% if(sqldetail[0]){ %>
                                                <tr>
                                                    <td>
                                                        <div class='colName'>
                                                            <a style="font-size: 30px;">審核</a>
    
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <select id='status' name='status' class="inputBox" >
                                                            <option >請選擇</option>
                                                            <option <% if(sqldetail[0]){ if(sqldetail[0].status=='0'){%>
                                                                selected
                                                                <% }} %> value='0' >未開放
                                                            </option>
                                                            <option <% if(sqldetail[0]){ if(sqldetail[0].status=='1'){%>
                                                                selected
                                                                <% }} %> value='1' >待審核
                                                            </option>
                                                            <option <% if(sqldetail[0]){ if(sqldetail[0].status=='2'){%>
                                                                selected
                                                                <% }} %> value='2' >已審核
                                                            </option>

                                                        </select>                                                        
                                                    </td>
    
                                                </tr>

                                            <%}%>

                                            <tr>
                                                <a style="font-size: 30px;color: red;">＊為必填欄位</a>

                                            </tr>
                                        </tbody>

                                    </table>
                                </div>
                                <div style="display: -webkit-inline-box;">
                                    <div><input id='back' type='button' onclick="backClick()" class="btn btn-back"
                                            style="float: left" value="回上頁"></div>
                                    <div><input id='savebtn' type='button' class="btn btn-darkblue" style="float: left"
                                            value="儲存"></div>

                                </div>

            </Form>
        </div>
    </center>
</body>

</html>
<script>
    $('#savebtn').click(function () {
        var isValid = true;

        if ($('#activityno').val() == '' || $('#activityname').val() == '' || $('#nickname').val() == ''
            || $('#activitydate').val() == '' || $('#point').val() == '' || $('#exchangecode').val() == '') {
            alert('＊為必填欄位');
            isValid = false;
        }
        if (isValid == true) {
            if (confirm('是否確定儲存?')) {
                $('#idForm').submit();
                alert('已儲存');
            };
        }

    })

    function backClick() {
        window.location = '/activityMaintain';
    }

</script>